var link=document.querySelector(".btn-feedback"),popup=document.querySelector(".feedback-hidden"),close=document.querySelector(".feedback-hidden-close"),form=popup.querySelector("form"),username=popup.querySelector("#feedback"),email=popup.querySelector("#send-feedback"),feed=popup.querySelector("textarea"),storage=localStorage.getItem("username"),input=document.querySelectorAll("input"),textarea=document.querySelectorAll("textarea");link.addEventListener("click",function(e){e.preventDefault(),popup.classList.add("feedback-hidden-show"),storage?(username.value=storage,email.focus()):username.focus()}),close.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("feedback-hidden-show"),popup.classList.remove("feedback-hidden-error")}),form.addEventListener("submit",function(e){username.value&&email.value&&feed.value?localStorage.setItem("username",username.value):(e.preventDefault(),popup.classList.remove("feedback-hidden-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("feedback-hidden-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&popup.classList.contains("feedback-hidden-show")&&(popup.classList.remove("feedback-hidden-show"),popup.classList.remove("feedback-hidden-error"))});for(var i=0;i<input.length;i++)input[i].addEventListener("focusout",function(){var e=this,t=this.nextElementSibling,o=t.firstElementChild;0==e.value.length?o.classList.remove("lostfocus"):o.classList.add("lostfocus")},!1);for(var i=0;i<textarea.length;i++)textarea[i].addEventListener("focusout",function(){var e=this,t=this.nextElementSibling,o=t.firstElementChild;0==e.value.length?o.classList.remove("lostfocus"):o.classList.add("lostfocus")},!1);